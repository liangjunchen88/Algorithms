# Runtime: 54 ms, faster than 83.16% of Python3 online submissions for Diameter of Binary Tree.
# Memory Usage: 16.3 MB, less than 84.91% of Python3 online submissions for Diameter of Binary Tree.


class Solution:
    def diameterOfBinaryTree(self, root: Optional[TreeNode]) -> int:
        self.ans = 0
        def depth(p: Optional[TreeNode]) -> int:
            if not p: return 0
            l, r = depth(p.left), depth(p.right)
            self.ans = max(self.ans, l + r)
            return 1 + max(l, r)
        depth(root)
        return self.ans
